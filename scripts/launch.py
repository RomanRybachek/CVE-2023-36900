import os
import sys

SHARED_FOLDER = "Z:\\"
LOG_FOLDER = "log_files\\"
LOG_NAME = "log1"
FOLDER_FOR_COPY = "log_copy\\"
UTILS_FOLDER = "utils\\"

LOG_NAME_WITH_EXT = LOG_NAME + ".blf"
MOD_LOG_NAME = LOG_NAME + "_updated.blf"
HOST_LOGCOPY_FOLDER = SHARED_FOLDER + FOLDER_FOR_COPY
HOST_PAYLOAD = SHARED_FOLDER + "payload.blf"
HOST_PAYLOAD_UPDATED = SHARED_FOLDER + "payload_updated.blf"

if len(sys.argv) < 2:
    print("Usage: python launch.py c|o|g|i")
    exit(1)

def create_log():
    os.system("rmdir /S /Q " + LOG_FOLDER)
    os.system("mkdir " + LOG_FOLDER)
    os.system("create_log_with_container.exe " + LOG_FOLDER + LOG_NAME)

def open_log():
    os.system("py update_crc32.py " + HOST_PAYLOAD)
    os.system("copy /Y " + HOST_PAYLOAD_UPDATED + " " + LOG_FOLDER + LOG_NAME_WITH_EXT)
    os.system("open_log.exe " + LOG_FOLDER + LOG_NAME)

def get_log():
    os.system("rmdir /S /Q " + HOST_LOGCOPY_FOLDER)
    os.system("mkdir " + HOST_LOGCOPY_FOLDER)
    os.system("copy /Y " + LOG_FOLDER + " " + HOST_LOGCOPY_FOLDER)

def copy_utilities():
    os.system("copy /Y "+ SHARED_FOLDER + UTILS_FOLDER + "create_log_with_container.exe ." )
    os.system("copy /Y "+ SHARED_FOLDER + UTILS_FOLDER + "open_log.exe ." )
    os.system("copy /Y "+ SHARED_FOLDER + UTILS_FOLDER + "update_crc32.py ." )

if sys.argv[1].find("c") != -1 : #create
    create_log()
if sys.argv[1].find("o") != -1: #open
    open_log()
if sys.argv[1].find("g") != -1: #create and open
    get_log()
if sys.argv[1].find("u") != -1: #utils
    copy_utilities()
